var sockets = require('./index');

sockets.listen(9999, function(socket) {
	socket.on('message', function(message) {
		console.log('websocket:', message);
		socket.send(message);
	});
});

sockets.createServer(function(socket) {
	socket.on('message',function(message) {
		console.log('server:', message);
		socket.send(message);
	});
	socket.on('close', function() {
		console.log('server:', 'socket close');
	});
	
}).listen(function() {
	var socket = sockets.connect();

	socket.send('world');
	socket.send({json:'data'});

	socket.on('message',function(data) {
		console.log('client:', data);
	});
});
